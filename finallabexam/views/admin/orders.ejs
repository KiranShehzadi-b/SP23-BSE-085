<h3><%- pageTitle %></h3>
<% if (messages && messages.length > 0) { %> <!-- Ensure messages are checked -->
  <div class="alert flash-message">
    <% messages.forEach(function(message) { %>
      <h5><%= message %></h5>
    <% }); %>
  </div>
<% } %>

<table class="table">
  <thead>
    <tr>
      <th>Customer Name</th>
      <th>City</th>
      <th>Address</th>
      <th>Total Price</th>
      <th>Status</th>
      <th>Order Created At</th> <!-- Added Created Date Column -->
      <th>Order Date/Time</th> <!-- Added Order DateTime Column -->
      <th>Actions</th> <!-- Actions Column (Edit/Delete) -->
    </tr>
  </thead>
  <tbody>
    <% orders.forEach(order => { %>
      <tr>
        <td><%= order.user.name %></td>
        <td><%= order.city %></td>
        <td><%= order.street + ', ' + order.postalCode + ', ' + order.country %></td>
        <td><%= order.totalAmount %></td>
        <td><%= order.status %></td>
        <td><%= new Date(order.createdAt).toLocaleString() %></td> <!-- Display CreatedAt -->
        <td><%= new Date(order.orderDateTime).toLocaleString() %></td> <!-- Display OrderDateTime -->
        <td>
          <a href="/admin/orders/edit/<%= order._id %>" class="btn btn-warning">Edit</a>
          <a href="/admin/orders/delete/<%= order._id %>" class="btn btn-danger">Delete</a>
        </td>
      </tr>
    <% }); %>
  </tbody>
</table>

<a href="/admin/dashboard" class="btn btn-secondary mt-3">Back To Dashboard</a>
